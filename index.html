<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Togetherjs-bookmarklet by sillero</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="Just a bookmarklet for a easier use of the TogetherJS javascript collaboration library by Mozilla">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Togetherjs-bookmarklet</h1>
        <p>Just a bookmarklet for a easier use of the <a href="http://togetherjs.com/">TogetherJS</a> javascript collaboration library by <a href="https://mozilla.org">Mozilla</a></p>

        <p class="view"><a href="https://github.com/sillero/togetherjs-bookmarklet">View the Project on GitHub <small>sillero/togetherjs-bookmarklet</small></a></p>


        <ul>
          <li><a href="https://github.com/sillero/togetherjs-bookmarklet/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/sillero/togetherjs-bookmarklet/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/sillero/togetherjs-bookmarklet">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>

<p>
<h4><a href="javascript:(function(e,t,n){var r=function(){var t=function(e){e=e||10;var t='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUV0123456789';var n='';for(var r=0;r<e;r++){n+=t.charAt(Math.floor(Math.random()*t.length))}return n},n=t(),r=e.prompt('Type session ID to join or create\n (default is \'together\')')||'together',i={reason:'started',shareId:r,running:true,date:Date.now(),sessionId:n};if(typeof sessionStorage['togetherjs-session.status']!=='undefined'){i=JSON.parse(sessionStorage['togetherjs-session.status']);i.shareId=r;i.running=true}i=JSON.stringify(i);return i}();sessionStorage['togetherjs-session.status']=r;if(typeof TogetherJS!=='undefined'){if(TogetherJS._loaded){TogetherJS.on('close',function(){TogetherJS(e)});TogetherJS(e)}else{TogetherJS(e)}}else{var i=t.createElement('script'),s='https://togetherjs.com/togetherjs-min.js';i.setAttribute('src',s);t.body.appendChild(i)}})(window,document)">TogetherJS</a>
	<span>&#x21E6; drag this to your bookmarks or click to test it</span></h4>
	<hr>

<h3>
<a name="bookmarklet" class="anchor" href="#bookmarklet"><span class="octicon octicon-link"></span></a>Bookmarklet</h3>

<div class="highlight highlight-javascript"><pre><span class="nx">javascript</span><span class="o">:</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="nx">n</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nx">e</span><span class="o">=</span><span class="nx">e</span><span class="o">||</span><span class="mi">10</span><span class="p">;</span><span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="s1">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUV0123456789'</span><span class="p">;</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="s1">''</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">r</span><span class="o">&lt;</span><span class="nx">e</span><span class="p">;</span><span class="nx">r</span><span class="o">++</span><span class="p">){</span><span class="nx">n</span><span class="o">+=</span><span class="nx">t</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="nx">t</span><span class="p">.</span><span class="nx">length</span><span class="p">))}</span><span class="k">return</span> <span class="nx">n</span><span class="p">},</span><span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">(),</span><span class="nx">r</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">prompt</span><span class="p">(</span><span class="s1">'Type session ID to join or create\n (default is \'together\')'</span><span class="p">)</span><span class="o">||</span><span class="s1">'together'</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="p">{</span><span class="nx">reason</span><span class="o">:</span><span class="s1">'started'</span><span class="p">,</span><span class="nx">shareId</span><span class="o">:</span><span class="nx">r</span><span class="p">,</span><span class="nx">running</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">date</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span><span class="nx">sessionId</span><span class="o">:</span><span class="nx">n</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">sessionStorage</span><span class="p">[</span><span class="s1">'togetherjs-session.status'</span><span class="p">]</span><span class="o">!==</span><span class="s1">'undefined'</span><span class="p">){</span><span class="nx">i</span><span class="o">=</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">[</span><span class="s1">'togetherjs-session.status'</span><span class="p">]);</span><span class="nx">i</span><span class="p">.</span><span class="nx">shareId</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="nx">i</span><span class="p">.</span><span class="nx">running</span><span class="o">=</span><span class="kc">true</span><span class="p">}</span><span class="nx">i</span><span class="o">=</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span><span class="k">return</span> <span class="nx">i</span><span class="p">}();</span><span class="nx">sessionStorage</span><span class="p">[</span><span class="s1">'togetherjs-session.status'</span><span class="p">]</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">TogetherJS</span><span class="o">!==</span><span class="s1">'undefined'</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">TogetherJS</span><span class="p">.</span><span class="nx">_loaded</span><span class="p">){</span><span class="nx">TogetherJS</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'close'</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">TogetherJS</span><span class="p">(</span><span class="nx">e</span><span class="p">)});</span><span class="nx">TogetherJS</span><span class="p">(</span><span class="nx">e</span><span class="p">)}</span><span class="k">else</span><span class="p">{</span><span class="nx">TogetherJS</span><span class="p">(</span><span class="nx">e</span><span class="p">)}}</span><span class="k">else</span><span class="p">{</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">t</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'script'</span><span class="p">),</span><span class="nx">s</span><span class="o">=</span><span class="s1">'https://togetherjs.com/togetherjs-min.js'</span><span class="p">;</span><span class="nx">i</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'src'</span><span class="p">,</span><span class="nx">s</span><span class="p">);</span><span class="nx">t</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">i</span><span class="p">)}})(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">);</span>
</pre></div>

<h3>
<a name="source" class="anchor" href="#source"><span class="octicon octicon-link"></span></a>Source</h3>

<div class="highlight highlight-javascript"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">session</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
            <span class="kd">var</span> <span class="nx">generateId</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">//copy/paste from togetherjs/utils.js</span>
                    <span class="nx">length</span> <span class="o">=</span> <span class="nx">length</span> <span class="o">||</span> <span class="mi">10</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">letters</span> <span class="o">=</span> <span class="s1">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUV0123456789'</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">s</span> <span class="o">+=</span> <span class="nx">letters</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">letters</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span>
                    <span class="p">}</span>
                    <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
                <span class="p">},</span>
                <span class="nx">sessionId</span> <span class="o">=</span> <span class="nx">generateId</span><span class="p">(),</span>
                <span class="nx">shareId</span> <span class="o">=</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">prompt</span><span class="p">(</span><span class="s1">'Type session ID to join or create (default is \'together\')'</span><span class="p">)</span> <span class="o">||</span> <span class="s1">'together'</span><span class="p">),</span>
                <span class="nx">sessionSt</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="nx">reason</span><span class="o">:</span> <span class="s1">'started'</span><span class="p">,</span>
                    <span class="nx">shareId</span><span class="o">:</span> <span class="nx">shareId</span><span class="p">,</span>
                    <span class="nx">running</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">date</span><span class="o">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
                    <span class="nx">sessionId</span><span class="o">:</span> <span class="nx">sessionId</span>
                <span class="p">};</span>

            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">sessionStorage</span><span class="p">[</span><span class="s1">'togetherjs-session.status'</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">'undefined'</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">sessionSt</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">sessionStorage</span><span class="p">[</span><span class="s1">'togetherjs-session.status'</span><span class="p">]);</span>
                <span class="nx">sessionSt</span><span class="p">.</span><span class="nx">shareId</span> <span class="o">=</span> <span class="nx">shareId</span><span class="p">;</span>
                <span class="nx">sessionSt</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">sessionSt</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">sessionSt</span><span class="p">);</span>

            <span class="k">return</span> <span class="nx">sessionSt</span><span class="p">;</span>
        <span class="p">})();</span>

    <span class="nx">sessionStorage</span><span class="p">[</span><span class="s1">'togetherjs-session.status'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">session</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">TogetherJS</span> <span class="o">!==</span> <span class="s1">'undefined'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">TogetherJS</span><span class="p">.</span><span class="nx">_loaded</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">TogetherJS</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"close"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">TogetherJS</span><span class="p">(</span><span class="nb">window</span><span class="p">);</span><span class="c1">//open</span>
            <span class="p">});</span>
            <span class="nx">TogetherJS</span><span class="p">(</span><span class="nb">window</span><span class="p">);</span><span class="c1">//close</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">TogetherJS</span><span class="p">(</span><span class="nb">window</span><span class="p">);</span><span class="c1">//open</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'script'</span><span class="p">),</span>
            <span class="nx">scriptSrc</span> <span class="o">=</span> <span class="s1">'https://togetherjs.com/togetherjs-min.js'</span><span class="p">;</span>

        <span class="nx">script</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">'src'</span><span class="p">,</span><span class="nx">scriptSrc</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
    <span class="p">}</span>   
<span class="p">})(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">);</span>
</pre></div>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/sillero">sillero</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
